<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reporte Sesión 3 | Lenin Campos</title>
    <link rel="stylesheet" href="../../style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/atom-one-dark.min.css">
</head>

<body>

    <nav class="navbar">
        <div class="logo">
            <a href="../../index.html"><i class="fas fa-terminal"></i> LeninCampos</a>
        </div>
        <ul class="nav-links" id="navLinks">
            <li><a href="../../index.html">/home</a></li>
            <li><a href="../index.html">../volver_al_parcial</a></li>
        </ul>
        <div class="burger" onclick="toggleMenu()">
            <div class="line1"></div>
            <div class="line2"></div>
            <div class="line3"></div>
        </div>
    </nav>

    <header class="report-header">
        <div class="header-content">
            <div class="meta-tags">
                <span class="tag">Parcial 1</span>
                <span class="tag">Semana 5</span>
                <span class="tag">Sesión 1</span>
            </div>
            <h1>Procedimientos Almacenados (Stored Procedures)</h1>
            <p class="subtitle">Fecha: 10 de Febrero, 2026</p>
        </div>
    </header>

    <main class="report-container">

        <section class="report-section">
            <h2 class="section-title"><i class="fas fa-bullseye"></i> 1. Objetivo y Contexto</h2>
            <div class="content-box">
                <p><strong>Objetivo:</strong> Desarrollar lógica de programación del lado del servidor mediante Procedimientos Almacenados (Stored Procedures). Se busca encapsular consultas complejas y reglas de negocio dentro de la base de datos para promover la reutilización de código y mejorar la seguridad.</p>
                <p><strong>Contexto: </strong> En arquitecturas empresariales, delegar toda la lógica a la aplicación cliente puede ser ineficiente e inseguro. Los SPs permiten ejecutar múltiples operaciones SQL como una sola unidad atómica, reduciendo el tráfico de red y protegiendo contra inyecciones SQL al parametrizar las entradas.</p>
            </div>
        </section>

        <section class="report-section">
            <h2 class="section-title"><i class="fas fa-book"></i> 2. Conceptos y Profundización</h2>
            <div class="content-box">
                <ul>
                    <li><strong>Stored Procedures:</strong> Subrutinas de código SQL guardadas en el diccionario de datos. Se pre-compilan al crearse, lo que mejora el tiempo de ejecución en comparación con enviar queries de texto plano repetidamente.</li>
                    <li><strong>Delimitadores (`DELIMITER //`):</strong> En SQL, el punto y coma `;` termina una sentencia. Al definir un SP, necesitamos cambiar temporalmente este delimitador para que el DBMS no ejecute el código hasta que terminemos de escribir todo el bloque `BEGIN...END`.</li>
                    <li><strong>Parámetros (IN, OUT, INOUT):</strong> Los SPs pueden recibir datos (`IN`), devolver resultados (`OUT`) o ambos. Esto los convierte en funciones flexibles. En la práctica usamos `IN` para parametrizar filtros dinámicos (ej. filtrar por grado).</li>
                    <li><strong>Variables:</strong> Uso de `DECLARE` para variables locales (viven solo dentro del SP) vs variables de sesión (`@variable`).</li>
                </ul>
            </div>
        </section>

        <section class="report-section">
            <h2 class="section-title"><i class="fas fa-desktop"></i> 3. Evidencia de Ejecución</h2>
            <div class="content-box">
                <p>Implementación y llamada de procedimientos:</p>

                <figure class="screenshot-container">
                    <img src="img/11.png" alt="Screenshot de la terminal en Ubiquitous">
                    <figcaption>Fig 1. Ejecución de `CALL etiquetaAlumno()` mostrando concatenación de cadenas.</figcaption>
                </figure>
                <figure class="screenshot-container">
                    <img src="img/12.png" alt="Screenshot de la terminal en Ubiquitous">
                    <figcaption>Fig 2. Procedimiento `email_generado` que construye correos dinámicos basados en dominio y nombre.</figcaption>
                </figure>
            </div>
        </section>

        <section class="report-section">
            <h2 class="section-title"><i class="fas fa-box-open"></i> 4. Entregables</h2>
            <div class="readme-preview">
                <h4>Código SP destacado:</h4>
                <pre class="cmd-preview">
DELIMITER $$
CREATE PROCEDURE email_generado(
    IN dominio VARCHAR(100) -- Parámetro de entrada
) 
BEGIN
    -- Lógica de negocio encapsulada
    SELECT nombre, 
        CONCAT(LOWER(REPLACE(nombre, ' ', '.')), '@', dominio) AS email_generado
    FROM Alumnos;
END $$ 
DELIMITER ;

-- Ejecución
CALL email_generado('udem.edu');
                </pre>
            </div>
        </section>

        <section class="report-section">
            <h2 class="section-title"><i class="fas fa-lightbulb"></i> 5. Conclusiones</h2>
            <div class="content-box">
                <p><strong>Aprendizaje:</strong> Los SPs son fundamentales para el principio de "Abstraction Layer". Aprendí que al modificar un SP, todas las aplicaciones que lo usan se actualizan automáticamente sin necesidad de redeployar el código fuente del backend.</p>
                <p><strong>Problemas y Soluciones:</strong> La sintaxis de los delimitadores fue confusa al principio, causando errores de sintaxis. Entendí que es un mecanismo necesario para "escapar" el cuerpo del procedimiento durante su definición.</p>
                <p><strong>Mejoras Futuras:</strong> Implementar manejo de errores con `DECLARE EXIT HANDLER` para gestionar excepciones (ej. si un alumno no existe) de manera elegante.</p>
            </div>
        </section>

        <section class="report-section">
            <h2 class="section-title"><i class="fas fa-quote-right"></i> 6. Referencias</h2>
            <div class="content-box">
                <ul class="references-list">
                    <li>MariaDB Server Documentation. (2025). <em>Stored Procedures Syntax</em>.</li>
                    <li>IBM DB2 Docs. (s. f.). <em>Benefits of Stored Procedures</em>.</li>
                </ul>
            </div>
        </section>

    </main>

    <footer>
        <p>Lenin Campos | Bases de Datos Avanzadas</p>
    </footer>

    <script src="../../script.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
</body>

</html>