<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reporte Sesión 2 | Lenin Campos</title>
    <link rel="stylesheet" href="../../style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/atom-one-dark.min.css">
</head>

<body>

    <nav class="navbar">
        <div class="logo">
            <a href="../../index.html"><i class="fas fa-terminal"></i> LeninCampos</a>
        </div>
        <ul class="nav-links" id="navLinks">
            <li><a href="../../index.html">/home</a></li>
            <li><a href="../index.html">../volver_al_parcial</a></li>
        </ul>
        <div class="burger" onclick="toggleMenu()">
            <div class="line1"></div>
            <div class="line2"></div>
            <div class="line3"></div>
        </div>
    </nav>

    <header class="report-header">
        <div class="header-content">
            <div class="meta-tags">
                <span class="tag">Parcial 1</span>
                <span class="tag">Semana 5</span>
                <span class="tag">Sesión 2</span>
            </div>
            <h1>Índices y Optimización de Consultas</h1>
            <p class="subtitle">Fecha: 13 de Febrero, 2026</p>
        </div>
    </header>

    <main class="report-container">

        <section class="report-section">
            <h2 class="section-title"><i class="fas fa-bullseye"></i> 1. Objetivo y Contexto</h2>
            <div class="content-box">
                <p><strong>Objetivo:</strong> Optimizar el rendimiento de las consultas SQL mediante la creación estratégica de índices. Se analizó el costo-beneficio de indexar columnas y se utilizó la herramienta `EXPLAIN` para auditar el plan de ejecución del motor de base de datos.</p>
                <p><strong>Contexto:</strong> En bases de datos con millones de registros, una búsqueda secuencial (Full Table Scan) es inaceptable por su lentitud. Los índices son vitales para el rendimiento, pero su abuso degrada la velocidad de escritura (INSERT/UPDATE/DELETE). Encontrar el equilibrio es una tarea clave del DBA.</p>
            </div>
        </section>

        <section class="report-section">
            <h2 class="section-title"><i class="fas fa-book"></i> 2. Conceptos y Profundización</h2>
            <div class="content-box">
                <ul>
                    <li><strong>B-Tree (Árbol B):</strong> Estructura de datos predominante en los índices SQL. Permite búsquedas logarítmicas (O(log n)) en lugar de lineales, organizando los datos en nodos balanceados. Funciona como el índice alfabético de un libro físico.</li>
                    <li><strong>Índices Compuestos:</strong> Índices que abarcan múltiples columnas (ej. `matricula` + `fecha`). Son efectivos solo si la consulta filtra por la columna más a la izquierda del índice ("Leftmost Prefix Rule").</li>
                    <li><strong>Cardinalidad:</strong> Medida de la unicidad de los datos en una columna. Columnas con alta cardinalidad (ej. matrícula) son excelentes candidatas para índices; columnas con baja cardinalidad (ej. género: M/F) no suelen beneficiarse tanto.</li>
                    <li><strong>EXPLAIN:</strong> Comando de diagnóstico que revela cómo el motor resolverá la query. Si en la columna `type` aparece `ALL`, indica un escaneo completo (malo); si aparece `ref` o `const`, está usando índices (bueno).</li>
                </ul>
            </div>
        </section>

        <section class="report-section">
            <h2 class="section-title"><i class="fas fa-desktop"></i> 3. Evidencia de Ejecución</h2>
            <div class="content-box">
                <p>Análisis de rendimiento antes y después de indexar:</p>

                <figure class="screenshot-container">
                    <img src="img/22.png" alt="Screenshot de la terminal">
                    <figcaption>Fig 1. Creación de un índice simple en la tabla Alumnos.</figcaption>
                </figure>
                <figure class="screenshot-container">
                    <img src="img/21.png" alt="Screenshot de la terminal">
                    <figcaption>Fig 2. Uso de `EXPLAIN` confirmando que la búsqueda ya no es secuencial (type: ref).</figcaption>
                </figure>
            </div>
        </section>

        <section class="report-section">
            <h2 class="section-title"><i class="fas fa-box-open"></i> 4. Entregables</h2>
            <div class="readme-preview">
                <h4>Comandos de Optimización:</h4>
                <pre class="cmd-preview">
-- 1. Crear índice para acelerar búsquedas por autor
CREATE INDEX indx_libros_autor ON Libros (autor);

-- 2. Índice compuesto para búsquedas complejas
-- Optimiza: WHERE matricula=X AND fecha=Y
CREATE INDEX indx_prestamos_mat_fecha ON Prestamos (matricula, fecha_prestamo);

-- 3. Análisis del plan de ejecución
EXPLAIN SELECT * FROM Prestamos 
WHERE matricula = 1005;
                </pre>
            </div>
        </section>

        <section class="report-section">
            <h2 class="section-title"><i class="fas fa-lightbulb"></i> 5. Conclusiones</h2>
            <div class="content-box">
                <p><strong>Aprendizaje:</strong> Aprendí que los índices no son gratuitos; ocupan espacio en disco y ralentizan las inserciones porque el árbol B debe rebalancearse cada vez que entran datos nuevos. La decisión de indexar debe basarse en métricas de lectura vs. escritura.</p>
                <p><strong>Problemas y Soluciones:</strong> Intenté crear un índice sobre una columna de texto muy larga, lo que no era eficiente. La solución fue indexar solo los primeros caracteres (Prefijo) o reconsiderar si esa columna realmente se usaba en cláusulas `WHERE`.</p>
                <p><strong>Mejoras Futuras:</strong> Investigar índices tipo HASH para comparaciones de igualdad exactas y FULLTEXT para búsquedas complejas dentro de textos largos.</p>
            </div>
        </section>

        <section class="report-section">
            <h2 class="section-title"><i class="fas fa-quote-right"></i> 6. Referencias</h2>
            <div class="content-box">
                <ul class="references-list">
                    <li>DataCamp. (2023). <em>SQL Server Indexing for Beginners</em>.</li>
                    <li>High Performance MySQL. (O'Reilly). <em>Indexing Strategies</em>.</li>
                </ul>
            </div>
        </section>

    </main>

    <footer>
        <p>Lenin Campos | Bases de Datos Avanzadas</p>
    </footer>

    <script src="../../script.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
</body>

</html>